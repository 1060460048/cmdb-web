webpackJsonp([1,8,9],{AkUR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Utg8"),n=i("KcRu"),s={name:"Index",components:{CHeader:a.default,CAside:n.default},mounted:function(){},methods:{process_team:function(){var t=this;localStorage.getItem("current_user_has_team")||this.$c_master.get("user/user/team-name").then(function(e){e.data.team_name?localStorage.setItem("current_user_has_team","1"):t.$notify({title:"警告",message:"您还不属于任何团队 请前往 工单申请->其它->加入团队 申请加入团队 否者将导致部分工单审批无法正常流转",type:"warning",duration:0})})}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticStyle:{display:"flex","flex-flow":"column",height:"100%","min-width":"1300px",overflow:"auto"}},[e("header",{staticStyle:{height:"80px"}},[e("c-header")],1),this._v(" "),e("section",{staticStyle:{flex:"1",display:"flex","flex-flow":"row"}},[e("c-aside",{staticStyle:{height:"100%"}}),this._v(" "),e("main",{staticStyle:{height:"100%",flex:"1",overflow:"auto"}},[e("div",{staticStyle:{margin:"20px"}},[e("router-view")],1)])],1)])},staticRenderFns:[]};var l=i("VU/8")(s,o,!1,function(t){i("yD8l")},"data-v-3bee06b9",null);e.default=l.exports},KcRu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i("bOdI"),s=i.n(n),o=i("fca4"),l=(a={name:"Aside",data:function(){return{is_collapse:!0,api_url:window.location.protocol+"//"+window.location.host+"/api-docs"}},methods:function(){}},s()(a,"methods",{on_select:function(t,e){this.$router.push({name:t})}}),s()(a,"computed",{}),s()(a,"components",{CMenuItem:o.default}),a),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%",display:"flex"}},[i("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"100%",display:"inline-block"},attrs:{"default-active":t.$route.name,collapse:t.is_collapse},on:{select:t.on_select}},t._l(t.$store.state.filtered_menu,function(t,e){return i("c-menu-item",{key:e,attrs:{item:t}})})),t._v(" "),i("div",{staticStyle:{height:"100%",display:"flex","align-items":"center"}},[i("i",{staticClass:"fa fa-outdent",class:{"fa-rotate-180":t.is_collapse},staticStyle:{color:"#909399",cursor:"pointer"},on:{click:function(e){t.is_collapse=!t.is_collapse}}})])],1)},staticRenderFns:[]};var c=i("VU/8")(l,r,!1,function(t){i("eVvJ")},null,null);e.default=c.exports},Utg8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("dqLT"),n=i("NHnr"),s={name:"Header",data:function(){return{user_info:{},is_dialog_token:!1,is_dialog_spit_slot:!1,is_dialog_about:!1,is_visible_update_password:!1,token:"***********************************************************",update_password_loading:!1,form_data:{},form_errors:{}}},mounted:function(){this.user_info=this.$store.state.user_info},methods:{get_data:function(){var t=this;this.$c_master.get("user/user/info").then(function(e){t.user_info=e.data,t.$store.state.user_info=e.data}).catch(function(t){})},get_token:function(){var t=this;this.$c_master.get("user/user/token").then(function(e){t.token=e.data.token}).catch(function(t){})},on_logout:function(){var t=this;n.default.$confirm("确认退出","退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){t.$store.commit("logout"),t.$router.push("login")})},on_login:function(){a.a.login()},on_open_api_docs:function(){var t=window.location.protocol+"//"+window.location.host+"/api-docs";window.open(t)},on_help:function(){window.open("https://zhuanlan.zhihu.com/p/34191320")},on_spilt_:function(){window.open("https://github.com/open-cmdb/cmdb/issues")},open_url:function(t){window.open(t)},on_submit_update_password:function(){var t=this;this.update_password_loading=!0,this.$c_master.post("mgmt/user/update-password",this.form_data).then(function(e){t.update_password_loading=!1,t.is_visible_update_password=!1,t.$message.success("修改成功")}).catch(function(e){t.update_password_loading=!1})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"background-color":"#409EFF",padding:"0px 20px",display:"flex","align-items":"center","justify-content":"space-between",height:"80px"}},[t._m(0),t._v(" "),i("div",[i("ul",{staticClass:"c_ul"},[i("li",{staticClass:"c_li",on:{click:t.on_open_api_docs}},[i("i",{staticClass:"fa fa-file-text",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v("API文档")]),t._v(" "),i("li",{staticClass:"c_li",on:{click:function(e){t.open_url("https://zhuanlan.zhihu.com/p/34191320")}}},[i("i",{staticClass:"fa fa-question-circle",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v("帮助")]),t._v(" "),i("li",{staticClass:"c_li",on:{click:function(e){t.open_url("https://github.com/open-cmdb/cmdb")}}},[i("i",{staticClass:"fa fa-code",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v("源代码")]),t._v(" "),i("li",{staticClass:"c_li",on:{click:function(e){t.open_url("https://github.com/open-cmdb/cmdb/issues")}}},[i("i",{staticClass:"fa fa-comment",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),t._v("我要吐槽")]),t._v(" "),i("li",{staticClass:"c_li"},[i("el-dropdown",{},[i("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"16px",color:"#FFF"}},[i("i",{staticClass:"fa fa-user-circle-o",staticStyle:{"margin-right":"5px"}}),t._v(t._s(t.user_info.name?t.user_info.name:"未登录")+"\n            "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("span",{staticStyle:{width:"100%"},on:{click:function(e){t.is_visible_update_password=!0}}},[i("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v("修改密码")])]),t._v(" "),t.user_info.username?i("el-dropdown-item",[i("span",{staticStyle:{width:"100%"},on:{click:t.on_logout}},[i("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v("退 出")])]):i("el-dropdown-item",[i("span",{staticStyle:{width:"100%"},on:{click:t.on_login}},[i("i",{staticClass:"fa fa-sign-in",attrs:{"aria-hidden":"true"}}),t._v("登 录")])])],1)],1)],1)])]),t._v(" "),i("el-dialog",{attrs:{title:"查看API Token",visible:t.is_dialog_token,width:"600px"},on:{"update:visible":function(e){t.is_dialog_token=e}}},[i("el-alert",{attrs:{title:"请妥善保存您的API Token",closable:!1,type:"warning"}}),t._v(" "),i("div",{staticStyle:{padding:"0px 20px","padding-top":"20px"}},[i("span",[t._v(t._s(t.token))]),t._v(" "),i("i",{staticClass:"fa fa-eye fa-lg",staticStyle:{float:"right","line-height":"24px"},attrs:{"aria-hidden":"true"},on:{click:t.get_token}})]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.is_dialog_token=!1}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"700px",title:"重置密码",visible:t.is_visible_update_password},on:{"update:visible":function(e){t.is_visible_update_password=e}}},[i("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px"}},[i("el-form-item",{attrs:{label:"新密码:",error:t.form_errors.password,required:""}},[i("el-input",{attrs:{type:"password",autofocus:""},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.on_submit_update_password(null)}},model:{value:t.form_data.password,callback:function(e){t.$set(t.form_data,"password",e)},expression:"form_data.password"}})],1),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.update_password_loading},on:{click:function(e){t.on_submit_update_password(null)}}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticStyle:{"margin-left":"50px","font-family":"Montserrat-Regular","letter-spacing":"2px","font-weight":"800",color:"#FFFFFF","font-size":"36px",height:"100%",display:"inline-block","box-sizing":"border-box","vertical-align":"middle"}},[this._v("CMDB")])])}]};var l=i("VU/8")(s,o,!1,function(t){i("loUL")},"data-v-fc2aedec",null);e.default=l.exports},eVvJ:function(t,e){},loUL:function(t,e){},yD8l:function(t,e){}});
//# sourceMappingURL=1.6e6d1feba7583c76340a.js.map