{"version":3,"sources":["webpack:///src/views/display-data/DisplayData.vue","webpack:///./src/views/display-data/DisplayData.vue?b22f","webpack:///./src/views/display-data/DisplayData.vue","webpack:///src/views/display-data/components/DataItem.vue","webpack:///./src/views/display-data/components/DataItem.vue?0d81","webpack:///./src/views/display-data/components/DataItem.vue"],"names":["DisplayData","name","components","DataItem","data","query","tables","loading","current_query","indices","current_indices","page","page_size","last_source","search_input_icon","page_num","current_page","total_num","all_history","username","history","is_focus","mounted","_this","this","self","document","onkeydown","e","window","event","keyCode","which","ctrlKey","$refs","search_input","focus","$message","warning","on_page_change","Math","floor","innerHeight","get_history","api","get","params","has_read_perms","then","response","results","catch","error","search_data","destroyed","save_history","methods","on_focus","console","log","currentTarget","select","history_filter","query_string","cb","filter","filter_function","map","value","push","toLowerCase","indexOf","JSON","parse","localStorage","getItem","$store","state","splice","setItem","stringify_default","add_data","table","_this2","reset_page","arguments","length","undefined","succeeded_callback","source","axios_default","a","CancelToken","post","ceil","total","on_search","_this3","includes","unshift","getElementById","val","delete_data","on_add_data","_this4","$c_add_dialog","table_name","$on","id","$c_master","on_show_info","vm","vue_esm","component","propsData","$mount","$el","appendChild","display_data_DisplayData","render","_vm","_h","$createElement","_c","_self","ref","staticStyle","width","attrs","autofocus","trigger-on-focus","suffix-icon","fetch-suggestions","select-when-unmatched","placeholder","on","nativeOn","keyup","$event","_k","key","model","callback","$$v","expression","slot","multiple","filterable","default-first-option","_l","item","padding","display","align-items","justify-content","label","_v","_s","icon","click","stopPropagation","directives","rawName","border","margin","overflow-x","_id","float","margin-right","background","layout","page-size","current-page","update:currentPage","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","props","on_show_history","index","HistoricalRecord","hist","data_index","data_id","on_show_detail","on_change_data","_source","on_delete","$confirm","confirmButtonText","cancelButtonText","type","delete","_index","success","$emit","components_DataItem","white-space","font-size","height","line-height","style","color","_e","ssrContext"],"mappings":"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","file":"static/js/3.88b7ab66f17aca3b7c94.js","sourcesContent":["<template>\n  <div>\n    <div>\n      <el-autocomplete id=\"search_input\" ref=\"search_input\" :autofocus=\"is_focus\" :trigger-on-focus=\"false\" :suffix-icon=\"search_input_icon\" @focus=\"on_focus\" :fetch-suggestions=\"history_filter\" select-when-unmatched @keyup.enter.native=\"on_search()\" placeholder=\"示例：(hostname:huawei* AND price:[20000 TO 40000]) 更多请参阅Lucene语法\" v-model=\"query\" style=\"width: 100%\">\n        <el-select v-model=\"indices\" style=\"width: 250px\" slot=\"prepend\" multiple filterable default-first-option placeholder=\"选择表 默认：all\">\n          <el-option style=\"padding: 10px; display: flex; align-items: center; justify-content: space-between\" v-for=\"item in tables\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\">\n            <span>{{ item.name }}</span>\n            <div>\n              <el-button style=\"padding: 0px\" icon=\"el-icon-circle-plus\" @click.stop=\"on_add_data(item)\"></el-button>\n              <el-button style=\"padding: 0px\" icon=\"el-icon-info\" @click.stop=\"on_show_info(item)\"></el-button>\n            </div>\n          </el-option>\n        </el-select>\n        <el-button id=\"submit\" @click=\"on_search()\" slot=\"append\" icon=\"el-icon-search\" :loading=\"loading\"></el-button>\n      </el-autocomplete>\n    </div>\n    <div style=\"border: 1px #DCDFE6 solid; margin: 10px 0px; width: 100%; overflow-x: auto\" v-loading=\"loading\">\n      <data-item v-for=\"item in data\" :data=\"item\" :key=\"item._id\" v-on:delete_data=\"delete_data\"></data-item>\n    </div>\n    <el-pagination style=\"float: right; margin-right: 100px;\" background layout=\"total, prev, pager, next\" :page-size=\"page_size\" :total=\"total_num\" :current-page.sync=\"current_page\" @current-change=\"on_page_change\">\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport DataItem from \"./components/DataItem.vue\";\nimport master from \"@/api\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"DisplayData\",\n  components: {\n    DataItem\n  },\n  data: () => {\n    return {\n      data: [],\n      query: \"\",\n      tables: [],\n      loading: false,\n      current_query: \"*\",\n      indices: [],\n      current_indices: [],\n      page: 1,\n      page_size: 0,\n      last_source: null,\n      search_input_icon: \"el-icon-edit\",\n      page_num: 0,\n      current_page: 1,\n      total_num: 0,\n      all_history: {},\n      username: \"\",\n      history: [],\n      is_focus: true\n    };\n  },\n  mounted() {\n    var self = this;\n    document.onkeydown = function(e) {\n      var keyNum = window.event ? e.keyCode : e.which;\n      if (73 == e.keyCode && e.ctrlKey) {\n        self.$refs.search_input.focus();\n      } else if (78 == e.keyCode && e.ctrlKey) {\n        if (self.current_page * self.page_size >= self.total_num) {\n          self.$message.warning(\"已在末页\");\n          return;\n        }\n        self.current_page += 1;\n        self.on_page_change(self.current_page);\n      } else if (80 == e.keyCode && e.ctrlKey) {\n        if (self.current_page == 1) {\n          self.$message.warning(\"已在首页\");\n          return;\n        }\n        self.current_page -= 1;\n        self.on_page_change(self.current_page);\n      }\n    };\n    var page_size = Math.floor((window.innerHeight - 170) / 44);\n    this.page_size = page_size > 8 ? page_size : 8;\n    this.get_history();\n    master\n      .get(\"mgmt/table\", { params: { page_size: 100, has_read_perms: true } })\n      .then(response => {\n        this.tables = response.data.results;\n      })\n      .catch(error => {});\n    this.search_data([], \"*\", 1, this.page_size);\n  },\n  destroyed() {\n    this.save_history();\n  },\n  methods: {\n    on_focus(event) {\n      console.log(\"on_focus\");\n      event.currentTarget.select();\n    },\n    history_filter(query_string, cb) {\n      console.log(\"query_string:\", query_string);\n      var values = query_string\n        ? this.history.filter(this.filter_function(query_string))\n        : this.history;\n      var results = [];\n      values.map(value => {\n        results.push({ value });\n      });\n      console.log(\"results:\", results);\n      cb(results);\n    },\n    filter_function(query_string) {\n      return value => {\n        return value.toLowerCase().indexOf(query_string.toLowerCase()) != -1;\n      };\n    },\n    get_history() {\n      var all_history = JSON.parse(localStorage.getItem(\"history\"));\n      if (all_history) {\n        var username = this.$store.state.username;\n        if (!username) {\n          return;\n        }\n        this.username = username;\n        this.all_history = all_history;\n        this.history = all_history[username] ? all_history[username] : [];\n      }\n    },\n    save_history() {\n      this.all_history[this.username] = this.history.splice(0, 100);\n      localStorage.setItem(\"history\", JSON.stringify(this.all_history));\n    },\n    add_data(table) {\n      console.log(\"table:\", table);\n    },\n    search_data(\n      indices,\n      query,\n      page,\n      page_size,\n      reset_page = false,\n      succeeded_callback = null\n    ) {\n      if (this.last_source) {\n        // this.last_source.cancel()\n      }\n      var source = axios.CancelToken.source();\n      this.last_source = source;\n      var self = this;\n      this.search_input_icon = \"el-icon-loading\";\n      this.loading = true;\n      master\n        .post(\"search/data-lucene\", { indices, query, page, page_size })\n        .then(response => {\n          this.loading = false;\n          self.data = response.data[\"hits\"];\n          this.total_num = response.data[\"total\"];\n          this.search_input_icon = \"el-icon-edit\";\n          this.page_num = Math.ceil(response.data.total / this.page_size);\n          if (reset_page) {\n            this.current_page = 1;\n          }\n          if (succeeded_callback) {\n            succeeded_callback();\n          }\n        })\n        .catch(error => {\n          this.loading = false;\n          this.search_input_icon = \"el-icon-edit\";\n        });\n    },\n    on_search() {\n      const succeeded_callback = () => {\n        this.current_query = this.query;\n        this.current_indices = this.indices;\n      };\n      if (\n        this.current_query == this.query &&\n        this.current_indices == this.indices\n      ) {\n        this.$message.warning(\"重复搜索\");\n        return;\n      }\n      if (this.query == \"\") {\n        this.query = \"*\";\n      }\n      this.is_focus = false;\n      if (!this.history.includes(this.query)) {\n        this.history.unshift(this.query);\n      }\n      this.page = 1;\n      this.search_data(\n        this.indices,\n        this.query,\n        1,\n        this.page_size,\n        true,\n        succeeded_callback\n      );\n      document.getElementById(\"submit\").focus();\n    },\n    on_page_change(val) {\n      console.log(\"val:\", val);\n      this.current_page = val;\n      this.search_data(\n        this.current_indices,\n        this.current_query,\n        val,\n        this.page_size\n      );\n    },\n    delete_data(data) {\n      this.data.splice(this.data.indexOf(data), 1);\n      this.total_num -= 1;\n    },\n    on_add_data(table) {\n      // var AddData = Vue.component(\"AddData\");\n      // var vm = new AddData({ propsData: { table_name: table.name } });\n      // vm.$mount();\n      // this.$el.appendChild(vm.$el);\n      var vm = this.$c_add_dialog(this, \"AddData\", { table_name: table.name });\n      vm.$on(\"add_item\", id => {\n        this.$c_master\n          .get(`data/${table.name}/${id}`)\n          .then(response => {\n            this.data.unshift(response.data);\n          })\n          .catch(error => {});\n      });\n    },\n    on_show_info(table) {\n      var ShowTable = Vue.component(\"ShowTable\");\n      var vm = new ShowTable({ propsData: { table } });\n      vm.$mount();\n      this.$el.appendChild(vm.$el);\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/display-data/DisplayData.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('el-autocomplete',{ref:\"search_input\",staticStyle:{\"width\":\"100%\"},attrs:{\"id\":\"search_input\",\"autofocus\":_vm.is_focus,\"trigger-on-focus\":false,\"suffix-icon\":_vm.search_input_icon,\"fetch-suggestions\":_vm.history_filter,\"select-when-unmatched\":\"\",\"placeholder\":\"示例：(hostname:huawei* AND price:[20000 TO 40000]) 更多请参阅Lucene语法\"},on:{\"focus\":_vm.on_focus},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.on_search()}},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}},[_c('el-select',{staticStyle:{\"width\":\"250px\"},attrs:{\"slot\":\"prepend\",\"multiple\":\"\",\"filterable\":\"\",\"default-first-option\":\"\",\"placeholder\":\"选择表 默认：all\"},slot:\"prepend\",model:{value:(_vm.indices),callback:function ($$v) {_vm.indices=$$v},expression:\"indices\"}},_vm._l((_vm.tables),function(item){return _c('el-option',{key:item.id,staticStyle:{\"padding\":\"10px\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\"},attrs:{\"label\":item.name,\"value\":item.name}},[_c('span',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',[_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-circle-plus\"},on:{\"click\":function($event){$event.stopPropagation();_vm.on_add_data(item)}}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.on_show_info(item)}}})],1)])})),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"id\":\"submit\",\"icon\":\"el-icon-search\",\"loading\":_vm.loading},on:{\"click\":function($event){_vm.on_search()}},slot:\"append\"})],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"border\":\"1px #DCDFE6 solid\",\"margin\":\"10px 0px\",\"width\":\"100%\",\"overflow-x\":\"auto\"}},_vm._l((_vm.data),function(item){return _c('data-item',{key:item._id,attrs:{\"data\":item},on:{\"delete_data\":_vm.delete_data}})})),_vm._v(\" \"),_c('el-pagination',{staticStyle:{\"float\":\"right\",\"margin-right\":\"100px\"},attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"page-size\":_vm.page_size,\"total\":_vm.total_num,\"current-page\":_vm.current_page},on:{\"update:currentPage\":function($event){_vm.current_page=$event},\"current-change\":_vm.on_page_change}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-46579d26\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/display-data/DisplayData.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DisplayData.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DisplayData.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-46579d26\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DisplayData.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/display-data/DisplayData.vue\n// module id = null\n// module chunks = ","<template>\n  <ul style=\"white-space:nowrap; margin: 0px; padding: 0px\">\n    <li style=\"display: inline-block;  border:1px solid #E4E7ED; padding: 9px\">\n      <el-button style=\"padding: 0px\" icon=\"el-icon-view\" @click=\"on_show_detail(data)\"></el-button>\n      <el-button style=\"padding: 0px\" icon=\"el-icon-time\" @click=\"on_show_history(data['_index'], data['_id'])\"></el-button>\n      <el-button style=\"padding: 0px\" icon=\"el-icon-edit\" @click=\"on_change_data(data)\"></el-button>\n      <el-button style=\"padding: 0px\" icon=\"el-icon-delete\" @click=\"on_delete()\"></el-button>\n    </li>\n    <li v-for=\"(value, key, index) in data['_source']\" v-if=\"key[0]!='S'\" :key=\"index\" style=\"display: inline-block;  border:1px solid #E4E7ED; padding: 0 12px; font-size:14px; height: 40px; line-height: 40px\" :style=\"{color: value==null ? '#C0C4CC':'#606266'}\">\n      {{ value==null?'null':value }}\n    </li>\n  </ul>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { master_s } from \"@/api\";\n\nexport default {\n  name: \"data-item\",\n  props: [\"data\"],\n  methods: {\n    on_show_history(index, id) {\n      var HistoricalRecord = Vue.component(\"HistoricalRecord\");\n      console.log(\"id:\", id);\n      var hist = new HistoricalRecord({\n        propsData: {\n          data_index: index,\n          data_id: id\n        }\n      });\n      hist.$mount();\n      this.$el.appendChild(hist.$el);\n    },\n    on_show_detail(data) {\n      console.log(\"on_show_detail.data:\", data);\n      var DataDetail = Vue.component(\"DataDetail\");\n      var vm = new DataDetail({\n        propsData: {\n          data: data,\n          source: data[\"_source\"]\n        }\n      });\n      vm.$mount();\n      this.$el.appendChild(vm.$el);\n    },\n    on_change_data(data) {\n      var vm = this.$c_add_dialog(this, \"ChangeData\", { data: data });\n      vm.$on(\"update_item\", item => {\n        this.data._source = item;\n      });\n    },\n    on_delete() {\n      this.$confirm(\"确认删除?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        master_s\n          .delete(`data/${this.data._index}/${this.data._id}`)\n          .then(data => {\n            console.log(\"then\");\n            console.log(\"response data:\", data);\n            this.$message.success(\"删除成功\");\n            this.$emit(\"delete_data\", this.data);\n          })\n          .catch(error => {});\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/display-data/components/DataItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticStyle:{\"white-space\":\"nowrap\",\"margin\":\"0px\",\"padding\":\"0px\"}},[_c('li',{staticStyle:{\"display\":\"inline-block\",\"border\":\"1px solid #E4E7ED\",\"padding\":\"9px\"}},[_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-view\"},on:{\"click\":function($event){_vm.on_show_detail(_vm.data)}}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-time\"},on:{\"click\":function($event){_vm.on_show_history(_vm.data['_index'], _vm.data['_id'])}}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.on_change_data(_vm.data)}}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"padding\":\"0px\"},attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.on_delete()}}})],1),_vm._v(\" \"),_vm._l((_vm.data['_source']),function(value,key,index){return (key[0]!='S')?_c('li',{key:index,staticStyle:{\"display\":\"inline-block\",\"border\":\"1px solid #E4E7ED\",\"padding\":\"0 12px\",\"font-size\":\"14px\",\"height\":\"40px\",\"line-height\":\"40px\"},style:({color: value==null ? '#C0C4CC':'#606266'})},[_vm._v(\"\\n    \"+_vm._s(value==null?'null':value)+\"\\n  \")]):_vm._e()})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-67dfb156\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/display-data/components/DataItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-67dfb156\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DataItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DataItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DataItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67dfb156\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DataItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-67dfb156\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/display-data/components/DataItem.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}